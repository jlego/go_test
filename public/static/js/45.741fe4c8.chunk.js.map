{"version":3,"sources":["components/conditionRule/index.js"],"names":["Option","Select","valueTypeArr","key","value","View","state","handleChange","index","name","val","currentTarget","onChange","props","setState","add","push","remove","splice","Array","isArray","this","nextProps","keyTitle","compareTitle","valueTitle","valueTypeTitle","style","options","map","item","flex","gutter","span","width","placeholder","bind","compare","valueType","checkedChildren","unCheckedChildren","checked","showTime","moment","dateString","className","onClick","type","icon","Component"],"mappings":"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","file":"static/js/45.741fe4c8.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { Input, Row, Col, Button, Select, InputNumber, DatePicker, Switch } from 'antd';\nimport { MinusCircleOutlined, PlusOutlined } from '@ant-design/icons';\nimport moment from 'moment';\nimport './style.less'\nconst { Option } = Select;\nconst valueTypeArr = [\n  {key: '字符串', value: 'string'},\n  {key: '数值', value: 'number'},\n  {key: '布尔值', value: 'boolean'},\n  {key: '日期', value: 'date'},\n  {key: '系统变量', value: 'variable'},\n]\n\nclass View extends Component {\n  state = {\n    value: []\n  }\n  componentDidMount(){\n    if(Array.isArray(this.props.value)){\n      this.setState({value: this.props.value})\n    }\n  }\n  componentWillReceiveProps(nextProps){\n    // console.warn(nextProps);\n    if(Array.isArray(nextProps.value)){\n      this.setState({value: nextProps.value})\n    }\n  }\n  handleChange = (index, name, val) => {\n    // console.warn(val.currentTarget, val);\n    let value = this.state.value\n    if(value[index]){\n      value[index][name] = val.currentTarget ? val.currentTarget.value : val\n    }\n    this.onChange(value)\n  }\n\n  onChange = value => {\n    const { onChange } = this.props\n    this.setState({value})\n    if(onChange) {\n      onChange(value)\n    }\n  };\n\n  add = () => {\n    let { value } = this.state\n    value.push({})\n    this.onChange(value)\n  }\n\n  remove = index => {\n    let value = this.state.value\n    value.splice(index, 1)\n    this.onChange(value)\n  }\n\n  render() {\n    const { keyTitle='关键字', compareTitle='比较', valueTitle='值', valueTypeTitle='值类型', style={}, options=[] } = this.props\n    return (\n      <div style={style}>\n        {\n          this.state.value.map((item, index) => (\n            <Row key={index}>\n              <Col flex=\"auto\">\n                <Row gutter={[8, 8]}>\n                  <Col span={6}>\n                    <Select style={{width: '100%'}} placeholder={keyTitle} value={item.key} onChange={this.handleChange.bind(this, index, 'key')}>\n                      {options.map((val, index) => <Option key={index} value={val.value}>{val.key}</Option>)}\n                    </Select>\n                  </Col>\n                  <Col span={6}>\n                    <Select style={{width: '100%'}} placeholder={compareTitle} value={item.compare} onChange={this.handleChange.bind(this, index, 'compare')}>\n                      <Option value=\"==\">等于</Option>\n                      <Option value=\"!=\">不等于</Option>\n                      <Option value=\">\">大于</Option>\n                      <Option value=\"<\">小于</Option>\n                    </Select>\n                  </Col>\n                  <Col span={6}>\n                    <Select style={{width: '100%'}} placeholder={valueTypeTitle} value={item.valueType} onChange={this.handleChange.bind(this, index, 'valueType')}>\n                      {valueTypeArr.map((val, index) => <Option key={index} value={val.value}>{val.key}</Option>)}\n                    </Select>\n                  </Col>\n                  <Col span={6}>\n                    {(item.valueType === 'string' || !item.valueType) && <Input placeholder={valueTitle} value={item.value} onChange={this.handleChange.bind(this, index, 'value')}/>}\n                    {item.valueType === 'number' && <InputNumber placeholder={valueTitle} value={item.value} onChange={this.handleChange.bind(this, index, 'value')}/>}\n                    {item.valueType === 'boolean' && <Switch checkedChildren=\"是\" unCheckedChildren=\"否\" checked={!!item.value} onChange={this.handleChange.bind(this, index, 'value')}/>}\n                    {item.valueType === 'date' && <DatePicker showTime value={moment(item.value)} onChange={(value, dateString) => this.handleChange(index, 'value', dateString)}/>}\n                  </Col>\n                </Row>\n              </Col>\n              <Col flex=\"50px\">\n                <MinusCircleOutlined className=\"dynamic-delete-button\" onClick={this.remove.bind(this, index)}/>\n              </Col>\n            </Row>\n          ))\n        }\n        <Button type=\"dashed\" onClick={this.add} style={{ width: '100%' }} icon={<PlusOutlined />}>\n          添加规则\n        </Button>\n      </div>\n    );\n  }\n}\nexport default View"],"sourceRoot":""}