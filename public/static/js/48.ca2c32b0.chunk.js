(this["webpackJsonpjlw-mes-admin"]=this["webpackJsonpjlw-mes-admin"]||[]).push([[48],{352:function(e,n,t){},684:function(e,n,t){"use strict";t.r(n);var a=t(34),r=t(17),o=t(31),s=t(44),c=t(118),i=t(99),u=t(100),l=t(8),p=t.n(l),d=t(0),f=t.n(d),m=t(142),h=t(672),v=t(55),b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},k=t(13),y=function(e,n){return d.createElement(k.a,Object.assign({},e,{ref:n,icon:b}))};y.displayName="UploadOutlined";var g=d.forwardRef(y),j=t(121),O=t.n(j),I=t(35),w=t(408),x=(t(352),function(e){Object(i.a)(t,e);var n=Object(u.a)(t);function t(e){var s;return Object(o.a)(this,t),(s=n.call(this,e)).handleChange=function(e){if("uploading"!==e.file.status&&"done"===e.file.status){var n=s.props,t=n.onChange,a=n.multiple;if(t){var o=[];o=a?e.fileList:[e.fileList.pop()],s.uploadIns.setState({fileList:o}),t(o.map((function(e){return Object(r.a)(Object(r.a)({},e.response||{}),{},{title:e.name,type:e.type})})))}}},s.doUpload=function(){var e=Object(a.a)(p.a.mark((function e(n){var t,a,r,o,i,u,l,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.file,e.next=3,s.getToken();case 3:a=e.sent,r=s.props.params,o=void 0===r?{}:r,i={useCdnDomain:!0,region:"z2"},u=Object(c.a)(s),l="".concat(t.uid).concat(t.name.substr(t.name.indexOf("."))),d={fname:t.name,params:o,mimeType:[]||!1},s.observable=w.a(t,l,a,d,i),s.observable.subscribe({next:function(e){u.uploadIns.onProgress({percent:e.total.percent},t)},error:function(e){console.log("--\x3e",e),u.uploadIns.onError(e,{},t)},complete:function(e){console.warn("\u4e0a\u4f20\u6210\u529f",e,t),u.uploadIns.onSuccess(e,t)}});case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),s.observable={},s}return Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.fileList;e&&(e.forEach((function(e,n){e.uid=e.uid||(e.key?e.key.substr(0,e.key.indexOf(".")):n),e.status="done",e.name=e.name||e.title,e.url=e.url||"".concat(I.a.QINIU.read).concat(e.key)})),this.uploadIns.setState({fileList:e}))}},{key:"getToken",value:function(){var e=Object(a.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O()({url:I.a.QINIU.token_url,header:{"content-type":"application/json"},method:"put",data:{cmd:"token",data:{},seqno:"no",verifycode:"no",version:"1.0"}});case 2:return n=e.sent,e.abrupt("return",0===n.data.status?n.data.data.uploadToken:"");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"beforeUpload",value:function(e,n){var t=e.size/1024/1024<50;return t||m.b.error("\u6587\u4ef6\u5927\u5c0f\u4e0d\u80fd\u5927\u4e8e50MB!"),t}},{key:"render",value:function(){var e=this,n=this.props,t=n.multiple,a=n.name;return f.a.createElement(h.a,{ref:function(n){return e.uploadIns=n},multiple:t,name:a,action:I.a.QINIU.action,customRequest:this.doUpload,beforeUpload:this.beforeUpload,onChange:this.handleChange},f.a.createElement(v.a,null,f.a.createElement(g,null)," \u4e0a\u4f20\u6587\u4ef6"))}}]),t}(d.Component));n.default=x}}]);
//# sourceMappingURL=48.ca2c32b0.chunk.js.map