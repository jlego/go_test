(this["webpackJsonpjlw-mes-admin"]=this["webpackJsonpjlw-mes-admin"]||[]).push([[49],{352:function(e,t,a){},683:function(e,t,a){"use strict";a.r(t);var n=a(34),r=a(17),o=a(31),i=a(44),s=a(118),c=a(99),l=a(100),u=a(8),p=a.n(u),d=a(0),f=a.n(d),m=a(142),v=a(672),h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},g=a(13),b=function(e,t){return d.createElement(g.a,Object.assign({},e,{ref:t,icon:h}))};b.displayName="SyncOutlined";var y=d.forwardRef(b),j=a(639),U=a(121),k=a.n(U),w=a(35),O=a(408);a(352);var I=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var i;return Object(o.a)(this,a),(i=t.call(this,e)).handleChange=function(e){if("uploading"!==e.file.status){if("done"===e.file.status){var t=i.props,a=t.onChange,n=t.multiple;if(a){var o=[];o=n?e.fileList:[e.fileList.pop()],i.uploadIns.setState({fileList:o}),a(o.map((function(e){return Object(r.a)(Object(r.a)({},e.response||{}),{},{title:e.name,type:e.type})})))}!function(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}(e.file.originFileObj,(function(e){return i.setState({imageUrl:e,loading:!1})}))}}else i.setState({imageUrl:"",loading:!0})},i.doUpload=function(){var e=Object(n.a)(p.a.mark((function e(t){var a,n,r,o,c,l,u,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.file,e.next=3,i.getToken();case 3:n=e.sent,r=i.props.params,o=void 0===r?{}:r,c={useCdnDomain:!0,region:"z2"},l=Object(s.a)(i),u="".concat(a.uid).concat(a.name.substr(a.name.indexOf("."))),d={fname:a.name,params:o,mimeType:[]||!1},i.observable=O.a(a,u,n,d,c),i.observable.subscribe({next:function(e){l.uploadIns.onProgress({percent:e.total.percent},a)},error:function(e){console.log("--\x3e",e),l.uploadIns.onError(e,{},a)},complete:function(e){console.warn("\u4e0a\u4f20\u6210\u529f",e,a),l.uploadIns.onSuccess(e,a)}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.state={imageUrl:"",loading:!1},i.observable={},i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.fileList;e&&(this.uploadIns.setState({fileList:e}),this.setState({imageUrl:e.length?"".concat(w.a.QINIU.read).concat(e[0].key):"",loading:!1}))}},{key:"getToken",value:function(){var e=Object(n.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k()({url:w.a.QINIU.token_url,header:{"content-type":"application/json"},method:"put",data:{cmd:"token",data:{},seqno:"no",verifycode:"no",version:"1.0"}});case 2:return t=e.sent,e.abrupt("return",0===t.data.status?t.data.data.uploadToken:"");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"beforeUpload",value:function(e,t){var a=["image/jpeg","image/png","image/gif"].includes(e.type);a||m.b.error("\u53ea\u80fd\u4e0a\u4f20\u56fe\u7247!");var n=e.size/1024/1024<2;return n||m.b.error("\u56fe\u7247\u5927\u5c0f\u4e0d\u80fd\u5927\u4e8e2MB!"),a&&n}},{key:"render",value:function(){var e=this,t=f.a.createElement("div",null,this.state.loading?f.a.createElement(y,{spin:!0}):f.a.createElement(j.a,null),f.a.createElement("div",{className:"ant-upload-text"},"\u4e0a\u4f20\u56fe\u7247")),a=this.state.imageUrl,n=this.props,r=n.multiple,o=n.name;return f.a.createElement(v.a,{ref:function(t){return e.uploadIns=t},multiple:r,name:o,listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:w.a.QINIU.action,customRequest:this.doUpload,beforeUpload:this.beforeUpload,onChange:this.handleChange},a?f.a.createElement("img",{src:a,alt:"avatar"}):t)}}]),a}(d.Component);t.default=I}}]);
//# sourceMappingURL=49.e75c4906.chunk.js.map