(this["webpackJsonpjlw-mes-admin"]=this["webpackJsonpjlw-mes-admin"]||[]).push([[56],{634:function(e,t,n){"use strict";var r=n(1),a=n(3),o=n(0),c=n(9),i=n(14),l=n(15),u=n(20),s=n(6),d=n(10),f=n(5),p=n(2),h=n(228),v=n(224),b=n(202),m=n(250),y=n(333),O=n(192),g=n(16),j=n(86),k=n(101),w=n(314),C=o.createContext(null);function E(e,t){if(!e)return!0;var n=e.data,r=n.disabled,a=n.disableCheckbox;switch(t){case"select":return r;case"checkbox":return r||a}return!1}function D(e,t){return[o.useCallback((function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"select",r=arguments.length>2?arguments[2]:void 0,a=e.get(t);return!r&&E(a,n)?null:a}),[e]),o.useCallback((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"select",r=arguments.length>2?arguments[2]:void 0,a=t.get(e);return!r&&E(a,n)?null:a}),[t])]}function x(e){return o.useMemo((function(){var t=new Map,n=new Map;return e.forEach((function(e){t.set(e.key,e),n.set(e.data.value,e)})),[t,n]}),[e])}var S={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},I=function(e,t){var n=e.prefixCls,r=e.height,a=e.itemHeight,c=e.virtual,i=e.options,l=e.flattenOptions,u=e.multiple,d=e.searchValue,p=e.onSelect,h=e.onToggleOpen,v=e.open,b=e.notFoundContent,m=e.onMouseEnter,y=o.useContext(C),O=y.checkable,g=y.checkedKeys,E=y.halfCheckedKeys,I=y.treeExpandedKeys,L=y.treeDefaultExpandAll,P=y.treeDefaultExpandedKeys,T=y.onTreeExpand,N=y.treeIcon,K=y.showTreeIcon,M=y.switcherIcon,V=y.treeLine,H=y.treeNodeFilterProp,R=y.loadData,A=y.treeLoadedKeys,W=y.treeMotion,_=y.onTreeLoad,F=o.useRef(),B=Object(k.a)((function(){return i}),[v,i],(function(e,t){return t[0]&&e[1]!==t[1]})),z=x(l),J=Object(f.a)(z,2),U=D(J[0],J[1]),G=Object(f.a)(U,2),q=G[0],Q=G[1],X=o.useMemo((function(){return g.map((function(e){var t=Q(e);return t?t.key:null}))}),[g]),Y=o.useMemo((function(){return O?{checked:X,halfChecked:E}:null}),[X,E,O]);o.useEffect((function(){var e;v&&!u&&X.length&&(null===(e=F.current)||void 0===e||e.scrollTo({key:X[0]}))}),[v]);var Z=String(d).toLowerCase(),$=o.useState(P),ee=Object(f.a)($,2),te=ee[0],ne=ee[1],re=o.useState(null),ae=Object(f.a)(re,2),oe=ae[0],ce=ae[1],ie=o.useMemo((function(){return I?Object(s.a)(I):d?oe:te}),[te,oe,Z,I]);o.useEffect((function(){d&&ce(l.map((function(e){return e.key})))}),[d]);var le=function(e){e.preventDefault()},ue=function(e,t){var n=t.node.key,r=q(n,O?"checkbox":"select");null!==r&&p(r.data.value,{selected:!g.includes(r.data.value)}),u||h(!1)},se=o.useState(null),de=Object(f.a)(se,2),fe=de[0],pe=de[1],he=q(fe);if(o.useImperativeHandle(t,(function(){return{onKeyDown:function(e){var t;switch(e.which){case j.a.UP:case j.a.DOWN:case j.a.LEFT:case j.a.RIGHT:null===(t=F.current)||void 0===t||t.onKeyDown(e);break;case j.a.ENTER:null!==he&&ue(0,{node:{key:fe},selected:!g.includes(he.data.value)});break;case j.a.ESC:h(!1)}},onKeyUp:function(){}}})),0===B.length)return o.createElement("div",{role:"listbox",className:"".concat(n,"-empty"),onMouseDown:le},b);var ve={};return A&&(ve.loadedKeys=A),ie&&(ve.expandedKeys=ie),o.createElement("div",{onMouseDown:le,onMouseEnter:m},he&&v&&o.createElement("span",{style:S,"aria-live":"assertive"},he.data.value),o.createElement(w.b,Object.assign({ref:F,focusable:!1,prefixCls:"".concat(n,"-tree"),treeData:B,height:r,itemHeight:a,virtual:c,multiple:u,icon:N,showIcon:K,switcherIcon:M,showLine:V,loadData:d?null:R,motion:W,checkable:O,checkStrictly:!0,checkedKeys:Y,selectedKeys:O?[]:X,defaultExpandAll:L},ve,{onActiveChange:pe,onSelect:ue,onCheck:ue,onExpand:function(e){ne(e),ce(e),T&&T(e)},onLoad:_,filterTreeNode:function(e){return!!Z&&String(e[H]).toLowerCase().includes(Z)}})))},L=o.forwardRef(I);L.displayName="OptionList";var P=L,T=function(){return null},N=n(23),K=n(97);function M(e){return Object(K.a)(e).map((function(e){if(!o.isValidElement(e)||!e.type)return null;var t=e.key,n=e.props,r=n.children,a=n.value,c=Object(N.a)(n,["children","value"]),i=Object(p.a)({key:t,value:a},c),l=M(r);return l.length&&(i.children=l),i})).filter((function(e){return e}))}function V(e){if(!e)return e;var t=Object(p.a)({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return Object(g.a)(!1,"New `rc-tree-select` not support return node instance as argument anymore. Please consider to remove `props` access."),t}}),t}function H(e){return Array.isArray(e)?e:void 0!==e?[e]:[]}function R(e,t){var n=new Map;return t.forEach((function(e){var t=e.data;n.set(t.value,t)})),e.map((function(e){return V(n.get(e))}))}function A(e){return e.disabled||e.disableCheckbox||!1===e.checkable}function W(e){for(var t=0,n=e.parent;n;)n=n.parent,t+=1;return t}function _(e){return Object(b.d)(function e(t){return(t||[]).map((function(t){var n=t.value,r=t.key,a=t.children,o=Object(p.a)(Object(p.a)({},t),{},{key:"key"in t?r:n});return a&&(o.children=e(a)),o}))}(e),!0).map((function(e){return{key:e.data.key,data:e.data,level:W(e)}}))}function F(e,t,n,r){var a=new Map;return H(t).forEach((function(e){e&&"object"===Object(d.a)(e)&&"value"in e&&a.set(e.value,e)})),e.map((function(e){var t={value:e},o=n(e,"select",!0),c=o?r(o.data):e;if(a.has(e)){var i=a.get(e);t.label="label"in i?i.label:c,"halfChecked"in i&&(t.halfChecked=i.halfChecked)}else t.label=c;return t}))}function B(e,t){new Set;return function e(n){return(n||[]).map((function(n){var r=n.key,a=n.value,o=n.children,c=Object(N.a)(n,["key","value","children"]),i="value"in n?a:r,l=Object(p.a)(Object(p.a)({},c),{},{key:null!==r&&void 0!==r?r:i,value:i,title:t(n)});return"children"in n&&(l.children=e(o)),l}))}(e)}function z(e,t,n){var r=n.getLabelProp,a=n.simpleMode,c=o.useRef({});return e?(c.current.formatTreeData=c.current.treeData===e?c.current.formatTreeData:B(a?function(e,t){var n=t.id,r=t.pId,a=t.rootPId,o={},c=[];return e.map((function(e){var t=Object(p.a)({},e),r=t[n];return o[r]=t,t.key=t.key||r,t})).forEach((function(e){var t=e[r],n=o[t];n&&(n.children=n.children||[],n.children.push(e)),(t===a||!n&&null===a)&&c.push(e)})),c}(e,Object(p.a)({id:"id",pId:"pId",rootPId:null},!0!==a?a:{})):e,r),c.current.treeData=e):c.current.formatTreeData=c.current.children===t?c.current.formatTreeData:B(M(t),r),c.current.formatTreeData}var J="SHOW_ALL",U="SHOW_PARENT",G="SHOW_CHILD";function q(e,t,n){var r=new Set(e);return t===G?e.filter((function(e){var t=n[e];return!(t&&t.children&&t.children.every((function(e){var t=e.node;return A(t)||r.has(t.key)})))})):t===U?e.filter((function(e){var t=n[e],a=t?t.parent:null;return!(a&&!A(a.node)&&r.has(a.node.key))})):e}var Q=["expandedKeys","treeData","treeCheckable","showCheckedStrategy","searchPlaceholder","treeLine","treeIcon","showTreeIcon","switcherIcon","treeNodeFilterProp","filterTreeNode","dropdownPopupAlign","treeDefaultExpandAll","treeCheckStrictly","treeExpandedKeys","treeLoadedKeys","treeMotion","onTreeExpand","onTreeLoad","loadData","treeDataSimpleMode","treeNodeLabelProp","treeDefaultExpandedKeys"],X=Object(h.a)({prefixCls:"rc-tree-select",components:{optionList:P},convertChildrenToData:function(){return null},flattenOptions:_,getLabeledValue:v.e,filterOptions:function(e,t,n){var r,a=n.optionFilterProp,o=n.filterOption;return!1===o?t:(r="function"===typeof o?o:function(e){return function(t,n){var r=n[e];return String(r).toLowerCase().includes(String(t).toLowerCase())}}(a),function t(n){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n.map((function(n){var o=n.children,c=a||r(e,V(n)),i=t(o||[],c);return c||i.length?Object(p.a)(Object(p.a)({},n),{},{children:i}):null})).filter((function(e){return e}))}(t))},isValueDisabled:function(e,t){var n=R([e],t)[0];return!!n&&n.disabled},findValueOption:R,omitDOMProps:function(e){var t=Object(p.a)({},e);return Q.forEach((function(e){delete t[e]})),t}});X.displayName="Select";var Y=o.forwardRef((function(e,t){var n=e.multiple,r=e.treeCheckable,a=e.treeCheckStrictly,c=e.showCheckedStrategy,i=void 0===c?"SHOW_CHILD":c,l=e.labelInValue,u=e.loadData,p=e.treeLoadedKeys,h=e.treeNodeFilterProp,v=void 0===h?"value":h,j=e.treeNodeLabelProp,k=e.treeDataSimpleMode,w=e.treeData,E=e.treeExpandedKeys,S=e.treeDefaultExpandedKeys,I=e.treeDefaultExpandAll,L=e.children,P=e.treeIcon,N=e.showTreeIcon,K=e.switcherIcon,M=e.treeLine,V=e.treeMotion,R=e.filterTreeNode,A=e.dropdownPopupAlign,W=e.onChange,B=e.onTreeExpand,J=e.onTreeLoad,U=e.onDropdownVisibleChange,G=e.onSelect,Q=e.onDeselect,Y=r||a,Z=n||Y,$=r&&!a,ee=a||l,te=o.useRef(null);o.useImperativeHandle(t,(function(){return{focus:te.current.focus,blur:te.current.blur}}));var ne=function(e){return w&&e.label||e.title},re=function(e){return j?e[j]:ne(e)},ae=z(w,L,{getLabelProp:ne,simpleMode:k}),oe=x(Object(o.useMemo)((function(){return _(ae)}),[ae])),ce=Object(f.a)(oe,2),ie=D(ce[0],ce[1]),le=Object(f.a)(ie,2),ue=le[0],se=le[1],de=Object(o.useMemo)((function(){return $?Object(b.a)(ae):{keyEntities:null}}),[ae,r,a]).keyEntities,fe=Object(O.a)(e.defaultValue,{value:e.value}),pe=Object(f.a)(fe,2),he=pe[0],ve=pe[1],be=function(e){var t=[],n=[];return e.forEach((function(e){se(e)?n.push(e):t.push(e)})),{missingRawValues:t,existRawValues:n}},me=Object(o.useMemo)((function(){var e=[],t=[];if(H(he).forEach((function(n){if(n&&"object"===Object(d.a)(n)&&"value"in n)if(n.halfChecked&&a){var r=se(n.value);e.push(r?r.key:n.value)}else t.push(n.value);else t.push(n)})),$){var n=be(t),r=n.missingRawValues,o=n.existRawValues.map((function(e){return se(e).key})),c=Object(m.a)(o,!0,de),i=c.checkedKeys,l=c.halfCheckedKeys;return[[].concat(Object(s.a)(r),Object(s.a)(i.map((function(e){return ue(e).data.value})))),l]}return[t,e]}),[he,Z,ee,r,a]),ye=Object(f.a)(me,2),Oe=ye[0],ge=ye[1],je=function(e,t){var n=t.value,r=t.getEntityByValue,a=t.getEntityByKey,c=t.treeConduction,i=t.showCheckedStrategy,l=t.conductKeyEntities,u=t.getLabelProp;return o.useMemo((function(){var t=e;return c&&(t=q(e.map((function(e){var t=r(e);return t?t.key:e})),i,l).map((function(e){var t=a(e);return t?t.data.value:e}))),F(t,n,r,u)}),[e,n,c,i,r])}(Oe,{treeConduction:$,value:he,showCheckedStrategy:i,conductKeyEntities:de,getEntityByValue:se,getEntityByKey:ue,getLabelProp:re}),ke=function(e,t,n){if(ve(Z?e:e[0]),W){var r=e;if($&&"SHOW_ALL"!==i){var c=q(e.map((function(e){var t=se(e);return t?t.key:e})),i,de);r=c.map((function(e){var t=ue(e);return t?t.data.value:e}))}var l=t||{triggerValue:void 0,selected:void 0},u=l.triggerValue,d=l.selected,f=ee?F(r,he,se,re):r;if(a){var p=ge.map((function(e){var t=ue(e);return t?t.data.value:e})).filter((function(e){return!r.includes(e)}));f=[].concat(Object(s.a)(f),Object(s.a)(F(p,he,se,re)))}var h={preValue:je,triggerValue:u},v=!0;(a||"selection"===n&&!d)&&(v=!1),function(e,t,n,r,a){var c=null,i=null;function l(){i||(i=[],function e(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r.map((function(r,u){var s="".concat(a,"-").concat(u),d=n.includes(r.value),f=e(r.children||[],s,d),p=o.createElement(T,Object.assign({},r),f.map((function(e){return e.node})));if(t===r.value&&(c=p),d){var h={pos:s,node:p,children:f};return l||i.push(h),h}return null})).filter((function(e){return e}))}(r),i.sort((function(e,t){var r=e.node.props.value,a=t.node.props.value;return n.indexOf(r)-n.indexOf(a)})))}Object.defineProperty(e,"triggerNode",{get:function(){return Object(g.a)(!1,"`triggerNode` is deprecated. Please consider decoupling data with node."),l(),c}}),Object.defineProperty(e,"allCheckedNodes",{get:function(){return Object(g.a)(!1,"`allCheckedNodes` is deprecated. Please consider decoupling data with node."),l(),a?i:i.map((function(e){return e.node}))}})}(h,u,e,ae,v),Y?h.checked=d:h.selected=d,W(Z?f:f[0],ee?null:r.map((function(e){var t=se(e);return t?re(t.data):null})),h)}},we=o.useCallback((function(e){if(U){var t={};Object.defineProperty(t,"documentClickClose",{get:function(){return Object(g.a)(!1,"Second param of `onDropdownVisibleChange` has been removed."),!1}}),U(e,t)}}),[U]);var Ce={optionLabelProp:null,optionFilterProp:v,dropdownAlign:A,internalProps:{mark:y.a,onClear:function(){ke([],null,"clear")},skipTriggerChange:!0,skipTriggerSelect:!0,onRawSelect:function(e,t,n){var r=e;if(Z){var a=function(e,t){var n=new Set(e);return n.add(t),Array.from(n)}(Oe,e);if($){var o=be(a),c=o.missingRawValues,i=o.existRawValues.map((function(e){return se(e).key})),l=Object(m.a)(i,!0,de).checkedKeys;a=[].concat(Object(s.a)(c),Object(s.a)(l.map((function(e){return ue(e).data.value}))))}ke(a,{selected:!0,triggerValue:e},n)}else ke([e],{selected:!0,triggerValue:e},n);G&&G(r,t)},onRawDeselect:function(e,t,n){var r=e,a=function(e,t){var n=new Set(e);return n.delete(t),Array.from(n)}(Oe,e);if($){var o=be(a),c=o.missingRawValues,i=o.existRawValues.map((function(e){return se(e).key})),l=Object(m.a)(i,{checked:!1,halfCheckedKeys:ge},de).checkedKeys;a=[].concat(Object(s.a)(c),Object(s.a)(l.map((function(e){return ue(e).data.value}))))}ke(a,{selected:!1,triggerValue:e},n),Q&&Q(r,t)}}};return"filterTreeNode"in e&&(Ce.filterOption=R),o.createElement(C.Provider,{value:{checkable:Y,loadData:u,treeLoadedKeys:p,onTreeLoad:J,checkedKeys:Oe,halfCheckedKeys:ge,treeDefaultExpandAll:I,treeExpandedKeys:E,treeDefaultExpandedKeys:S,onTreeExpand:B,treeIcon:P,treeMotion:V,showTreeIcon:N,switcherIcon:K,treeLine:M,treeNodeFilterProp:v}},o.createElement(X,Object.assign({ref:te,mode:Z?"multiple":null},e,Ce,{value:je,labelInValue:!0,options:ae,onChange:null,onSelect:null,onDeselect:null,onDropdownVisibleChange:we})))})),Z=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.apply(this,arguments)).selectRef=o.createRef(),e.focus=function(){e.selectRef.current.focus()},e.blur=function(){e.selectRef.current.blur()},e}return Object(i.a)(n,[{key:"render",value:function(){return o.createElement(Y,Object.assign({ref:this.selectRef},this.props))}}]),n}(o.Component);Z.TreeNode=T,Z.SHOW_ALL=J,Z.SHOW_PARENT=U,Z.SHOW_CHILD=G;var $=Z,ee=n(7),te=n.n(ee),ne=n(96),re=n(39),ae=n(42),oe=n(227),ce=n(313),ie=n(53),le=n(45),ue=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},se=function(e,t){var n,c=e.prefixCls,i=e.size,l=e.bordered,u=void 0===l||l,s=e.className,d=e.treeCheckable,f=e.multiple,p=e.listHeight,h=void 0===p?256:p,v=e.listItemHeight,b=void 0===v?26:v,m=e.notFoundContent,y=e.switcherIcon,O=e.treeLine,g=e.getPopupContainer,j=e.dropdownClassName,k=e.treeIcon,w=void 0!==k&&k,C=e.transitionName,E=e.choiceTransitionName,D=void 0===E?"":E,x=ue(e,["prefixCls","size","bordered","className","treeCheckable","multiple","listHeight","listItemHeight","notFoundContent","switcherIcon","treeLine","getPopupContainer","dropdownClassName","treeIcon","transitionName","choiceTransitionName"]),S=o.useContext(re.b),I=S.getPopupContainer,L=S.getPrefixCls,P=S.renderEmpty,T=S.direction,N=S.virtual,K=S.dropdownMatchSelectWidth,M=o.useContext(ie.b);Object(ae.a)(!1!==f||!d,"TreeSelect","`multiple` will alway be `true` when `treeCheckable` is true");var V,H=L("select",c),R=L("select-tree",c),A=L("tree-select",c),W=te()(j,"".concat(A,"-dropdown"),Object(a.a)({},"".concat(A,"-dropdown-rtl"),"rtl"===T)),_=!(!d&&!f),F=Object(oe.a)(Object(r.a)(Object(r.a)({},x),{multiple:_,prefixCls:H})),B=F.suffixIcon,z=F.removeIcon,J=F.clearIcon;V=void 0!==m?m:P("Select");var U=Object(ne.a)(x,["suffixIcon","itemIcon","removeIcon","clearIcon","switcherIcon"]),G=i||M,q=te()(!c&&A,(n={},Object(a.a)(n,"".concat(H,"-lg"),"large"===G),Object(a.a)(n,"".concat(H,"-sm"),"small"===G),Object(a.a)(n,"".concat(H,"-rtl"),"rtl"===T),Object(a.a)(n,"".concat(H,"-borderless"),!u),n),s),Q=L();return o.createElement($,Object(r.a)({virtual:N,dropdownMatchSelectWidth:K},U,{ref:t,prefixCls:H,className:q,listHeight:h,listItemHeight:b,treeCheckable:d?o.createElement("span",{className:"".concat(H,"-tree-checkbox-inner")}):d,inputIcon:B,multiple:f,removeIcon:z,clearIcon:J,switcherIcon:function(e){return Object(ce.a)(R,y,O,e)},showTreeIcon:w,notFoundContent:V,getPopupContainer:g||I,treeMotion:null,dropdownClassName:W,choiceTransitionName:Object(le.b)(Q,"",D),transitionName:Object(le.b)(Q,"slide-up",C)}))},de=o.forwardRef(se);de.TreeNode=T,de.SHOW_ALL=J,de.SHOW_PARENT=U,de.SHOW_CHILD=G;t.a=de},661:function(e,t,n){"use strict";n.r(t);var r=n(66),a=n(11),o=n(17),c=n(31),i=n(44),l=n(99),u=n(100),s=n(0),d=n.n(s),f=n(634),p=n(33),h=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).onChange=function(e){r.setState({value:e});var t=r.props.onChange;t&&t(e)},r.state={treeData:[]},r}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p.a[this.props.api]&&p.a[this.props.api](Object(o.a)(Object(o.a)({},this.props.params||{}),t)).then((function(t){Array.isArray(t.data.list)?(t.data.list.forEach((function(t){t.id=t._id,t.key=e.props.valuepropname?t[e.props.valuepropname]:t._id,t.title=e.props.titlepropname?t[e.props.titlepropname]:t.title||t.name,t.value=e.props.valuepropname?t[e.props.valuepropname]:t._id})),e.setState({treeData:t.data.list})):e.setState({treeData:[]})}))}},{key:"render",value:function(){var e=this.props,t=e.value,n=(e.onChange,Object(a.a)(e,["value","onChange"])),o=this.state.treeData;return d.a.createElement(f.a,Object(r.a)({treeDataSimpleMode:!0,style:{width:"100%"},value:t,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"\u8bf7\u9009\u62e9",onChange:this.onChange,treeData:o,treeDefaultExpandAll:!0},n))}}]),n}(s.Component);t.default=h}}]);
//# sourceMappingURL=56.28a61596.chunk.js.map